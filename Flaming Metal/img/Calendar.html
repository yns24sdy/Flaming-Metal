<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events Calendar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
        }
        .header {
            grid-column: span 7;
            text-align: center;
            margin-bottom: 20px;
        }
        .day-header {
            text-align: center;
            font-weight: bold;
            padding: 10px;
            background-color: #f0f0f0;
        }
        .day {
            border: 1px solid #ddd;
            min-height: 100px;
            padding: 5px;
            position: relative;
        }
        .day-number {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .event {
            background-color: #e3f2fd;
            padding: 2px 5px;
            margin: 2px 0;
            border-radius: 3px;
            font-size: 0.9em;
            display: flex;
            justify-content: space-between;
        }
        .performance-event {
            background-color: #ffebee;
        }
        .event-delete {
            color: #f44336;
            cursor: pointer;
            margin-left: 5px;
        }
        .controls {
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .add-event-form {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .add-event-form input, .add-event-form button {
            margin: 5px;
            padding: 8px;
        }
        .prev-month, .next-month {
            color: #999;
            background-color: #f5f5f5;
        }
        .legend {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            gap: 15px;
        }
        .legend-item {
            display: flex;
            align-items: center;
        }
        .legend-color {
            width: 15px;
            height: 15px;
            margin-right: 5px;
            border: 1px solid #ddd;
        }
        .event-location {
            font-size: 0.8em;
            color: #666;
            display: block;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Events Calendar</h1>
        <div class="controls">
            <button id="prev-month">Previous Month</button>
            <h2 id="current-month-year">July 2023</h2>
            <button id="next-month">Next Month</button>
        </div>
    </div>

    <div class="legend">
        <div class="legend-item">
            <div class="legend-color" style="background-color: #ffebee;"></div>
            <span>Performance Event</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background-color: #e3f2fd;"></div>
            <span>Your Event</span>
        </div>
    </div>

    <div class="calendar" id="calendar">
        <!-- Calendar content will be generated by JavaScript -->
    </div>

    <div class="add-event-form">
        <h3>Add New Event</h3>
        <input type="date" id="event-date" required>
        <input type="text" id="event-title" placeholder="Event title" required>
        <input type="text" id="event-location" placeholder="Location (optional)">
        <button id="add-event">Add Event</button>
    </div>

    <script>
        // Current displayed month and year
        let currentDate = new Date();
        currentDate.setDate(1); // Set to first day of the month
        
        // Performance Events
        const performanceEvents = {
            '2025-6-25': [{ 
                title: 'Iron Maiden Concert', 
                location: 'London', 
                isPerformance: true 
            }],
            '2025-7-5': [{ 
                title: 'Black Sabbath Farewell Concert', 
                location: 'Birmingham', 
                isPerformance: true 
            }]
        };

        // User-added events
        let userEvents = JSON.parse(localStorage.getItem('userEvents')) || {};
        
        // Initialize calendar
        function initCalendar() {
            renderCalendar();
            
            // Event listeners
            document.getElementById('prev-month').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar();
            });
            
            document.getElementById('next-month').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar();
            });
            
            document.getElementById('add-event').addEventListener('click', addUserEvent);
        }
        
        // Render calendar
        function renderCalendar() {
            const calendarEl = document.getElementById('calendar');
            const monthYearEl = document.getElementById('current-month-year');
            
            // Clear calendar
            calendarEl.innerHTML = '';
            
            // Set month and year title
            const monthNames = ["January", "February", "March", "April", "May", "June", 
                              "July", "August", "September", "October", "November", "December"];
            monthYearEl.textContent = `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
            
            // Add day headers
            const dayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
            dayNames.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'day-header';
                dayHeader.textContent = day;
                calendarEl.appendChild(dayHeader);
            });
            
            // Calculate first day of the month
            const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1).getDay();
            
            // Calculate days in last month
            const daysInLastMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 0).getDate();
            
            // Calculate days in current month
            const daysInMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).getDate();
            
            // Calculate days in next month to show
            const daysInNextMonth = 42 - (firstDay + daysInMonth); // 6 rows x 7 days = 42 cells
            
            // Add days from previous month
            for (let i = firstDay - 1; i >= 0; i--) {
                const day = document.createElement('div');
                day.className = 'day prev-month';
                day.innerHTML = `<div class="day-number">${daysInLastMonth - i}</div>`;
                calendarEl.appendChild(day);
            }
            
            // Add days from current month
            for (let i = 1; i <= daysInMonth; i++) {
                const day = document.createElement('div');
                day.className = 'day';
                day.innerHTML = `<div class="day-number">${i}</div>`;
                
                // Check for events
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth() + 1;
                const fullDateKey = `${year}-${month}-${i}`;
                
                // Check performance events
                if (performanceEvents[fullDateKey]) {
                    performanceEvents[fullDateKey].forEach(event => {
                        const eventEl = document.createElement('div');
                        eventEl.className = 'event performance-event';
                        eventEl.innerHTML = event.title + 
                                          (event.location ? `<span class="event-location">${event.location}</span>` : '');
                        day.appendChild(eventEl);
                    });
                }
                
                // Check for user events
                if (userEvents[fullDateKey]) {
                    userEvents[fullDateKey].forEach((event, index) => {
                        const eventEl = document.createElement('div');
                        eventEl.className = 'event';
                        
                        const eventContent = document.createElement('span');
                        eventContent.innerHTML = event.title + 
                                              (event.location ? `<span class="event-location">${event.location}</span>` : '');
                        
                        const deleteBtn = document.createElement('span');
                        deleteBtn.className = 'event-delete';
                        deleteBtn.innerHTML = '&times;';
                        deleteBtn.onclick = (e) => {
                            e.stopPropagation();
                            deleteUserEvent(fullDateKey, index);
                        };
                        
                        eventEl.appendChild(eventContent);
                        eventEl.appendChild(deleteBtn);
                        day.appendChild(eventEl);
                    });
                }
                
                calendarEl.appendChild(day);
            }
            
            // Add days from next month
            for (let i = 1; i <= daysInNextMonth; i++) {
                const day = document.createElement('div');
                day.className = 'day next-month';
                day.innerHTML = `<div class="day-number">${i}</div>`;
                calendarEl.appendChild(day);
            }
        }
        
        // Add user event
        function addUserEvent() {
            const dateInput = document.getElementById('event-date');
            const titleInput = document.getElementById('event-title');
            const locationInput = document.getElementById('event-location');
            
            if (!dateInput.value || !titleInput.value) {
                alert('Please enter both date and event title');
                return;
            }
            
            const date = new Date(dateInput.value);
            const dateKey = `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;
            
            if (!userEvents[dateKey]) {
                userEvents[dateKey] = [];
            }
            
            userEvents[dateKey].push({
                title: titleInput.value,
                location: locationInput.value,
                isFixed: false
            });
            
            // Save to local storage
            localStorage.setItem('userEvents', JSON.stringify(userEvents));
            
            // Re-render calendar
            renderCalendar();
            
            // Clear inputs
            titleInput.value = '';
            locationInput.value = '';
        }
        
        // Delete user event
        function deleteUserEvent(dateKey, index) {
            if (userEvents[dateKey] && userEvents[dateKey][index]) {
                userEvents[dateKey].splice(index, 1);
                
                // If no more events for this date, remove the date key
                if (userEvents[dateKey].length === 0) {
                    delete userEvents[dateKey];
                }
                
                // Save to local storage
                localStorage.setItem('userEvents', JSON.stringify(userEvents));
                
                // Re-render calendar
                renderCalendar();
            }
        }
        
        // Initialize calendar
        initCalendar();
    </script>
</body>
</html>